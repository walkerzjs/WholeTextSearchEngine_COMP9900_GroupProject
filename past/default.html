<!doctype html>
<html>
    <head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    <link rel="shortcut icon" href="static/favicon.ico" />
    <title>UNSWtalk</title>
    </head>
    <body>
        <form method="POST">
        <nav class="navbar navbar-expand-md fixed-top navbar-dark bg-dark justify-content-between" >

            <a class="navbar-brand" href="../"><h3>UNSWtalk</h3></a>

            <div class="form-inline">
                <a class="navbar-brand" href="../home"> 
                    &#160&#160&#160&#160&#160
                    <img src="/static/{{zid}}.jpg" width="40" height="40">
                </a>
                <a class="navbar-brand" href="../{{zid}}"> {{ details[zid]['full_name'] }} &#160 </a>
                <a class="navbar-brand" href="../friends"> Friends </a>
                <a class="navbar-brand" href="../"> Links </a>
                <a class="navbar-brand" href="../"> Links </a>
            </div>

            <div class="form-inline">
                <input class="form-control" type="text" placeholder="Search names or posts" aria-label="Search" name="search" size="50">
                <span class="input-group-btn">
                    <button class="btn btn-secondary" type="submit" name="btn" value="s_name">&#x1F50E Name</button>
                </span>
                <span class="input-group-btn">
                    <button class="btn btn-secondary" type="submit" name="btn" value="s_post">&#x1F50E Post</button>
                </span>
            </div>

                <button type="submit" class="btn btn-warning" name="btn" value="logout">Logout</button>

        </nav>
        <br><br>
        
        {% if posts %}    
        <ul class="list-group">
            {% set count = [0] %}{% set vars = {'li': False} %}{% set vars = {'div': False} %}
            {% for time, msg in posts.items() %}    
                {% if msg is mapping %}
                    {% for time_x, msg_x in msg.items()  %}
                        {{open_li}}
                        {% if msg_x is mapping %}
                            {% if ( (count[0] is greaterthan(start)) and (count[0] is lessthan(end)) ) %}
                                {% for time_x_x, msg_x_x in msg_x.items() %}
                                    {% if msg_x_x is mapping %}
                                        {% for id, msg_x_x_x in msg_x_x.items() %}

                                                    <h6>&nbsp&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                                                    <a href="../{{id}}"><img src="/static/{{id}}.jpg" width="20" height="20"></a>
                                                    &nbsp<a href="../{{id}}">{{ details[id]['full_name'] }}:</h6></a>
                                                    &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                                                    &nbsp&nbsp{{ msg_x_x_x | safe}}
                                                <br>
                                                &nbsp&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                                                <i><u> {{time_x_x}} </i></u>
                                                <br><br>

                                        {% endfor %}
                                    {% else %}

                                            <h5>&nbsp&nbsp
                                            <a href="../{{time_x_x}}"><img src="/static/{{time_x_x}}.jpg" width="30" height="30"></a>
                                            &nbsp<a href="../{{time_x_x}}">{{ details[time_x_x]['full_name'] }}:</h5></a>
                                            &nbsp&nbsp {{ msg_x_x | safe}}
                                        <br>
                                        &nbsp&nbsp<i><u> {{time_x}} </i></u>&nbsp&nbsp
                                        <button type="button" class="btn btn-sm btn-outline-info" name="btn" value="s_name_btn">Comment</button>
                                        <br><br>


                                    {% endif %}
                                {% endfor %}
                            {% endif %}
                        {% else %}
                            {% if count.append(count.pop() + 1) %}{% endif %}
                            {% if ( (count[0] is greaterthan(start)) and (count[0] is lessthan(end)) ) %}
                                    {#{count[0]}#}
                                    <nav class="navbar navbar-expand-md bg-dark" ></nav>
                                    {% if vars.update({'li': True}) %} {% endif %}
                                    
                                    <li class="list-group-item">
                                            <h4>&nbsp&nbsp
                                            <a  href="../{{time_x}}"><img src="/static/{{time_x}}.jpg" width="50" height="50"></a>
                                            &nbsp<a  href="../{{time_x}}">{{ details[time_x]['full_name'] }}:</h4></a>
                                            &nbsp{{ msg_x | safe}}

                                        <br><br>
                                        &nbsp&nbsp<i> {{time}} </i>&nbsp&nbsp
                                        <button type="button" class="btn btn-sm btn-outline-info" name="btn" value="s_name_btn">Comment</button>
                                        <br>
                                        <hr>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                    {% if vars.li %}</li>{% set vars = {'li': False} %}{% endif %}
                {% endif %}
            {% endfor %}
        </ul>
        
        <nav class="navbar navbar-expand-md bg-dark justify-content-between" >
        <div class="btn-toolbar justify-content-between" role="toolbar" aria-label="Toolbar with button groups" >
            <div class="btn-group btn-group-lg" role="group" aria-label="First group">
            <form method="POST" >
            
            {% set pages =  (((n_posts-1)/10) + 2) %}
            {% for j in range( 1,  pages | round(0,'floor') | int ) %}
                <button type="submit" class="btn btn-secondary" name="btn" value="p{{j}}">{{j}}</button>
            {% endfor %}
            {% set curr = (end-1)/10 %}
            {% set pages =  pages - 1 %}
            <font size="4" color="#1E90FF">
                &#160&#160 <u>Page: {{ curr | round |int }}/{{ pages | round(0,'floor') |int }}</u>
            </font>
            </form>
            </div>
        </div>
        </nav>
        {% endif %}
        </form>
   </body>
</html>
